{% extends 'main/base.html' %}
{% load crispy_forms_tags %}

{% block content %}

<div class="container">
	<div class="row justify-content-center mt-3">
		<div class="col-md-5 col-sm-12 border-bottom">
			<h5>Add a Post</h5>
		</div>
	</div>

	<div class="row justify-content-center mt-3 mb-5">
		<div class="col-md-5 col-sm-12 border-bottom">
			<form action = "{%url 'scrapbook:post-list' %}" method="POST" name = "scrapbook" enctype="multipart/form-data">
				{% csrf_token %}
				{{ form | crispy }}
				<div class="d-grid gap-2">
					<input type="submit" value="Submit">
				</div>
			</form>	
		</div>
	</div>

	<form action = "{%url 'discover:discover' %}" method="POST" name = "discover" enctype="multipart/form-data">
		<select name="scrapbook" id = 'select-scrapbook' class = "form-control">
		{% for scrapbook in Scrapbook %}
			<option value="{{ scrapbook.id }}">{{ scrapbook.name }}</option>
		{% endfor %}
		</select>
	</form>

	{% for post in post_list %}
	<div class="row justify-content-center mt-3">
		<div class="col-md-5 col-sm-12 border-bottom position-relative">
			<p><strong>{{ post.author }}</strong>{{ post.created_on }}</p>
			{% if post.image.count > 0 %}
  			<div class="row">
  			{% for img in post.image.all %}

      		<img src="{{ img.image.url }}" class="post-image" />
			
			</div>
			{% endfor %}
			
			{% endif %}
	
			<p>{{ post.body }}</p>
			</div>
		</div>
		</div>
	</div>
	{% endfor %}
</div>
{% endblock content %}